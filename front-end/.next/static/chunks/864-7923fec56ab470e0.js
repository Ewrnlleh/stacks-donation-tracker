(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[864],{495:()=>{},1481:(e,t,n)=>{var a={"./connect-modal.entry.js":[8736,736]};function r(e){if(!n.o(a,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=a[e],r=t[0];return n.e(t[1]).then(()=>n(r))}r.keys=()=>Object.keys(a),r.id=1481,e.exports=r},5506:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var a=n(5155),r=n(2115),o=n(6874),s=n.n(o),i=n(5839),c=n(1976),l=n(3109),d=n(7580),m=n(4835),u=n(9785);let h=()=>{var e,t,n,o;let[h,p]=(0,r.useState)(!1),{isConnected:x,connect:g,disconnect:f,userData:A}=(0,i.v)();return(0,r.useEffect)(()=>{p(!0)},[]),(0,a.jsx)("nav",{className:"bg-white shadow-lg border-b border-gray-200",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)(s(),{href:"/",className:"flex items-center space-x-2",children:[(0,a.jsx)(c.A,{className:"h-8 w-8 text-orange-500"}),(0,a.jsx)("span",{className:"font-bold text-xl text-gray-900",children:"DeFi Donation Tracker"})]}),(0,a.jsxs)("div",{className:"hidden md:flex ml-10 space-x-8",children:[(0,a.jsxs)(s(),{href:"/",className:"text-gray-700 hover:text-orange-600 px-3 py-2 rounded-md text-sm font-medium flex items-center space-x-1",children:[(0,a.jsx)(l.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Campaigns"})]}),h&&x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s(),{href:"/create",className:"text-gray-700 hover:text-orange-600 px-3 py-2 rounded-md text-sm font-medium",children:"Create Campaign"}),(0,a.jsxs)(s(),{href:"/dashboard",className:"text-gray-700 hover:text-orange-600 px-3 py-2 rounded-md text-sm font-medium flex items-center space-x-1",children:[(0,a.jsx)(d.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Dashboard"})]})]})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:h&&x?(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"hidden sm:flex items-center space-x-2 bg-gray-100 px-3 py-2 rounded-lg",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,a.jsxs)("span",{className:"text-sm text-gray-700 font-medium",children:[(null==A||null==(n=A.profile)||null==(t=n.stxAddress)||null==(e=t.testnet)?void 0:e.slice(0,8))||(null==A||null==(o=A.identityAddress)?void 0:o.slice(0,8))||"Connected","..."]})]}),(0,a.jsxs)("button",{onClick:f,className:"flex items-center space-x-2 bg-red-100 hover:bg-red-200 text-red-700 px-4 py-2 rounded-lg transition-colors duration-200",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Disconnect"})]})]}):h?(0,a.jsxs)("button",{onClick:g,className:"flex items-center space-x-2 bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg transition-colors duration-200",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Connect Wallet"})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-2 bg-gray-300 text-gray-500 px-6 py-2 rounded-lg",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Loading..."})]})})]}),(0,a.jsx)("div",{className:"md:hidden",children:(0,a.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[(0,a.jsx)(s(),{href:"/",className:"text-gray-700 hover:text-orange-600 block px-3 py-2 rounded-md text-base font-medium",children:"Campaigns"}),h&&x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s(),{href:"/create",className:"text-gray-700 hover:text-orange-600 block px-3 py-2 rounded-md text-base font-medium",children:"Create Campaign"}),(0,a.jsx)(s(),{href:"/dashboard",className:"text-gray-700 hover:text-orange-600 block px-3 py-2 rounded-md text-base font-medium",children:"Dashboard"})]})]})})]})})}},5839:(e,t,n)=>{"use strict";n.d(t,{r:()=>p,v:()=>u});var a=n(5155),r=n(2115),o=n(6021),s=n(5322),i=n(9082),c=n(146),l=n(7995),d=n(9509);let m=(0,r.createContext)(void 0),u=()=>{let e=(0,r.useContext)(m);if(!e)throw Error("useWallet must be used within a WalletProvider");return e},h=new o.oO(["store_write","publish_data"]),p=e=>{let{children:t}=e,[n]=(0,r.useState)(()=>new o._T({appConfig:h})),[u,p]=(0,r.useState)(!1),[x,g]=(0,r.useState)(null),[f,A]=(0,r.useState)(!1),[N,v]=(0,r.useState)(null),y="mainnet"===d.env.NEXT_PUBLIC_NETWORK?s.nG:s.SS,C=d.env.NEXT_PUBLIC_CONTRACT_ADDRESS||"ST3AM1A56AK2C1XAFJ4115ZSV26EB49BVQ10MGCS0",w=d.env.NEXT_PUBLIC_DONATION_CONTRACT_NAME||"donation-tracker-v2";(0,r.useEffect)(()=>{n.isSignInPending()?n.handlePendingSignIn().then(e=>{g(e),p(!0)}):n.isUserSignedIn()&&(g(n.loadUserData()),p(!0))},[n]);let T=async()=>{A(!0);try{await (0,o.OT)({appDetails:{name:"DeFi Donation Tracker",icon:"/logo.svg"},redirectTo:"/",onFinish:()=>{window.location.reload()},userSession:n})}catch(e){console.error("Wallet connection error:",e),v("Failed to connect wallet")}finally{A(!1)}},j=async(e,t,n,a)=>{if(!u)throw Error("Wallet not connected");A(!0);try{let r=Math.floor(1e6*n);await (0,o.XU)({network:y,contractAddress:C,contractName:w,functionName:"create-campaign",functionArgs:[(0,i.y3)(e),(0,i.y3)(t),(0,c.u)(r),(0,c.u)(a)],postConditionMode:l.FN.Allow,anchorMode:l.Fj.Any,onFinish:e=>{console.log("Campaign created successfully:",e)},onCancel:()=>{console.log("Campaign creation cancelled")}})}catch(e){throw console.error("Campaign creation error:",e),v("Failed to create campaign"),e}finally{A(!1)}},E=async(e,t,n)=>{if(!u)throw Error("Wallet not connected");A(!0);try{let a=Math.floor(1e6*t);await (0,o.XU)({network:y,contractAddress:C,contractName:w,functionName:"donate-to-campaign",functionArgs:[(0,c.u)(e),(0,c.u)(a),(0,i.y3)(n||"")],postConditionMode:l.FN.Allow,anchorMode:l.Fj.Any,onFinish:e=>{console.log("Donation successful:",e)},onCancel:()=>{console.log("Donation cancelled")}})}catch(e){throw console.error("Donation error:",e),v("Failed to make donation"),e}finally{A(!1)}},S=async e=>{if(!u)throw Error("Wallet not connected");A(!0);try{await (0,o.XU)({network:y,contractAddress:C,contractName:w,functionName:"withdraw-funds",functionArgs:[(0,c.u)(e)],postConditionMode:l.FN.Allow,anchorMode:l.Fj.Any,onFinish:e=>{console.log("Withdrawal successful:",e)},onCancel:()=>{console.log("Withdrawal cancelled")}})}catch(e){throw console.error("Withdrawal error:",e),v("Failed to withdraw funds"),e}finally{A(!1)}};return(0,a.jsx)(m.Provider,{value:{isConnected:u,userData:x,userSession:n,connect:T,disconnect:()=>{n.signUserOut(),p(!1),g(null),window.location.reload()},createCampaign:j,donateToCampaign:E,makeDonation:E,withdrawFunds:S,loading:f,error:N},children:t})}},8453:(e,t,n)=>{"use strict";n.d(t,{U:()=>h});var a=n(5322),r=n(4874),o=n(8682);n(9082);let s=[{id:1,title:"Help Flood Victims in Local Community",description:"Supporting families affected by recent flooding with emergency supplies, temporary housing, and rebuilding assistance. Every donation helps provide immediate relief and long-term recovery support.",targetAmount:100,currentAmount:67.5,creator:"ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM",endBlock:15e4,isActive:!0,createdAt:145e3},{id:2,title:"Education Fund for Underprivileged Children",description:"Providing school supplies, uniforms, and educational resources to children from low-income families. Your contribution helps break the cycle of poverty through education.",targetAmount:250,currentAmount:180.25,creator:"ST2CY5V39NHDPWSXMW9QDT3HC3GD6Q6XX4CFRK9H",endBlock:148e3,isActive:!0,createdAt:142e3},{id:3,title:"Animal Shelter Emergency Fund",description:"Our local animal shelter needs urgent support for medical care, food, and shelter improvements. Help us save and care for abandoned and injured animals in our community.",targetAmount:75,currentAmount:75,creator:"ST3NBRSFKX28FQ2ZJ1MAKX58HKHSDGNV5N7R21XCP",endBlock:14e4,isActive:!1,createdAt:135e3},{id:4,title:"Clean Water Initiative",description:"Building wells and water purification systems in rural areas lacking access to clean water. This project will provide safe drinking water to over 500 families.",targetAmount:500,currentAmount:125.75,creator:"ST1SJ3DTE5DN7X54YDH5D64R3BCB6A2AG2ZQ8YPD5",endBlock:155e3,isActive:!0,createdAt:147e3},{id:5,title:"Medical Equipment for Rural Clinic",description:"Purchasing essential medical equipment for a rural clinic serving remote communities. This includes diagnostic tools, emergency equipment, and basic medical supplies.",targetAmount:300,currentAmount:45.5,creator:"ST2REHHS5J3CERCRBEPMGH7921Q6PYKAADT7JP2VB",endBlock:152e3,isActive:!0,createdAt:146e3}];var i=n(9509);let c="mainnet"===(i.env.NEXT_PUBLIC_STACKS_NETWORK||"testnet")?a.nG:a.SS,l=i.env.NEXT_PUBLIC_CONTRACT_ADDRESS||"ST3AM1A56AK2C1XAFJ4115ZSV26EB49BVQ10MGCS0",d=i.env.NEXT_PUBLIC_DONATION_CONTRACT_NAME||"donation-tracker-v2";i.env.NEXT_PUBLIC_REWARDS_CONTRACT_NAME;let m=i.env.NEXT_PUBLIC_PLATFORM_HIRO_API_KEY;class u{async makeHiroApiCall(e){let t={"Content-Type":"application/json"};m&&(t.Authorization="Bearer ".concat(m));let n=await fetch("".concat(this.apiUrl).concat(e),{method:"GET",headers:t});if(!n.ok)throw Error("Hiro API call failed: ".concat(n.statusText));return n.json()}async fetchContractData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{let n=await (0,r.FC)({contractAddress:l,contractName:d,functionName:e,functionArgs:t,network:c,senderAddress:l});return(0,o.JP)(n)}catch(t){return console.error("Error calling ".concat(e,":"),t),console.log("Falling back to mock data due to contract error"),null}}async getCampaign(e){return s.find(t=>t.id===e)||null}async getTotalCampaigns(){return s.length}async getTotalDonations(){return s.reduce((e,t)=>e+Math.ceil(t.currentAmount/5),0)}async getAllCampaigns(){return[...s]}constructor(){this.apiUrl=i.env.NEXT_PUBLIC_STACKS_API_URL||"https://api.testnet.hiro.so"}}let h=new u}}]);